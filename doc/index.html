<!doctype html>
<html lang="en">
  <!--
  Documentation for LSA - program to list properties of audio files.
  
  Copyright (c) 2014 Mark Karpov
  
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3 or any
  later version published by the Free Software Foundation; with no Invariant
  Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the
  license is included in the section entitled "GNU Free Documentation
  License".  -->
  <head>
    <meta charset="utf-8">
    <meta name="description"    content="LSA Manual">
    <meta name="author"         content="Mark Karpov">
    <meta name="dcterms.rights" content="(c) 2014 Mark Karpov">
    <meta name="keywords"       content="audio files, sound">
    <title>MIDA Manual</title>
    <link href="ascetic.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>MIDA</h1>
    <h2 id="0">Table of Contents</h2>
    <ul class="no-bullet">
      <li><a href="#1">1 What is LSA?</a></li>
      <li><a href="#2">2 Installation</a>
        <ul class="no-bullet">
          <li><a href="#2.1">2.1 Windows</a></li>
          <li><a href="#2.2">2.2 GNU/Linux</a></li>
          <li><a href="#2.3">2.3 Compilation from Source</a></li>
      </ul></li>
      <li><a href="#3">3 Invocation</a></li>
      <li><a href="#4">4 Configuration File</a></li>
      <li><a href="#6">6 Final Notes</a></li>
    </ul>
    <h2 id="1">1 What is LSA?</h2>
    <p>MIDA is a minimalistic language for algorithmic generation of MIDI
      files. MIDA is not interactive in sense that you cannot control result
      of its activity in real time, it is intended for producers and should
      be used with a DAW. MIDA can help you create variative elements in
      your music in a very simple way. Since MIDI can control a lot of
      different instruments, power of MIDA is truly great.</p>
    <p>Main reason for MIDA development is to create software tool that can
      be used in such a way that does not change established workflow, so
      people could use familiar plugins and software instruments.</p>
    <p>Manual Copyright &copy; 2014 Mark Karpov.</p>
    <p>MIDA Copyright &copy; 2014 Mark Karpov.</p>
    <p>All contents here is copyright by the developer and is released under
      the <a href="http://www.gnu.org/copyleft/fdl.html"> GNU Free
      Documentation License</a>.</p>
    <p>MIDA is licensed
      under <a href="http://www.gnu.org/copyleft/gpl.html">GNU General
      Public License v.3</a>; it's free software.</p>
    <p>[<a href="#0">contents</a>]</p>
    <h2 id="2">2 Installation</h2>
    <p>It's absolutely possible to install MIDA on any platform on
      which <a href="https://www.haskell.org/platform/">Haskell Platform</a>
      is supported. However, there are some precompiled options that may be
      more convenient and straightforward for some people. In particular, I
      propose installer for Windows users and self-extracting script for
      GNU/Linux users. To install MIDA on other platforms see
      section <a href="2.3">2.3 Compilation from Source</a>.</p>
    <p>[<a href="#0">contents</a>]</p>
    <h3 id="2.1">2.1 Windows</h3>
    <p>To install MIDA on
      Windows <a href="https://github.com/mrkkrp/mida/releases">download
      MIDA installer</a>, then run it. To uninstall MIDA, run
      uninstaller.</p>
    <p>[<a href="#0">contents</a>]</p>
    <h3 id="2.2">2.2 GNU/Linux</h3>
    <p><a href="https://github.com/mrkkrp/mida/releases">Download
      self-extracting script</a> and run it as root. To uninstall MIDA
      execute:</p>
    <pre># midarm</pre>
    <p>The script will remove MIDA from your system.</p>
    <p>[<a href="#0">contents</a>]</p>
    <h3 id="2.3">2.3 Compilation from Source</h3>
    <p>First, install <a href="https://www.haskell.org/platform/">Haskell
      Platform</a>. You also need to
      install <a href="http://www.haskell.org/cabal/">Cabal</a>. After that,
      download or clone <a href="https://github.com/mrkkrp/mida">MIDA
        repository</a>:</p>
    <pre>$ git clone https://github.com/mrkkrp/mida.git master</pre>
    <p>Usually you need to update list of available packages before
      compilation, so do this:</p>
    <pre>$ cabal update
$ cabal install cabal-install</pre>
    <p>Now <code>cd</code> into directory containing downloaded repository
      of MIDA and execute:</p>
    <pre>$ cabal configure
$ cabal build</pre>
    <p>It's very likely that Cabal will not compile MIDA from the first time
      so you'll need to install all dependencies that Cabal will list for
      you.</p>
    <p>After compilation you should manually copy executable
      file <code>dist/build/mida/mida</code> into some directory where your
      system can see the executable. GNU/Linux users can run the following
      script (it also copies documentation and <code>midarm</code> for
      uninstallation.):</p>
    <pre># sh install.sh</pre>
    <p>[<a href="#0">contents</a>]</p>
    <h2 id="3">3 Invocation</h2>
    <p>MIDA can work as translator from source code to MIDI files, or as
      interactive environment (interpreter) that functions much like
      REPL. If no input file is supplied, MIDA starts in interactive mode by
      default. Otherwise, one should use command line options to start MIDA
      in interactive mode.</p>
    <p>Here's the complete list of command line options:</p>
    <pre>mida [-i|--interactive] [-s|--seed SEED] [-q|--quarter TICKS]
     [-b|--beats BEATS] [-o|--output OUT] [FILE]</pre>
    <p>Let's list all available options:</p>
   <table>
      <tr><th>Option</th><th>Description</th></tr>
      <tr><td><code>-h</code>,<code>--help</code></td>
        <td>Shows information regarding invocation parameters.</td></tr>
      <tr><td><code>-i</code>,<code>--interactive</code></td>
        <td>Starts MIDA in interactive mode. This option effectively
        disables all other supplied options, because they only make sense
        in non-interactive (batch) mode.</td></tr>
      <tr><td><code>-s</code>,<code>--seed</code></td>
        <td>Sets seed for MIDI generation. You can generate identical MIDI
        files if you use the same seed. Default value
        is <code>0</code>.</td></tr>
      <tr><td><code>-q</code>,<code>--quarter</code></td>
        <td>Sets number of ticks for quarter note, default value
        is <code>24</code>.</td></tr>
      <tr><td><code>-b</code>,<code>--beats</code></td>
        <td>Sets total time of result MIDI file as number of beats (quarter
        notes), default value is <code>16</code>.</td></tr>
      <tr><td><code>-o</code>,<code>--output</code></td>
        <td>Specifies output file. Default value is built from base name of
        supplied file and extension <code>.mid</code>.</td></tr>
   </table>
    <p>[<a href="#0">contents</a>]</p>
    <h2 id="4">4 Configuration File</h2>
    <p>One can customize MIDA to some extent using configuration file. One
      should create the file in his/her home directory. This directory will
      be different on different operating systems. On GNU/Linux machines it
      would be something like <code>/home/username/.mida</code>, while
      Windows users should create the file
      in <code>C:\Users\username\.mida</code>.</p>
    <p>For now, only four parameters can be changed:</p>
      <ul>
        <li>prompt (as <code>prompt</code>);</li>
        <li>length of displayed result of evaluation
          (as <code>prvlen</code>);</li>
        <li>maximum size (as number of top-level elements) of a score
          (as <code>block</code>); this helps prevent infinite generation of
          scores that consist only of zero-time elements;</li>
        <li>preview command (as <code>prvcmd</code>).</li>
      </ul>
    <p>Syntax of <code>.mida</code> file is one of Unix configuration
      file. That is, you can use <code>#</code> for line comments,
      and <code>=</code> to assign new values (spaces before and
      after <code>=</code> are ignored).</p>
    <p>Here is complete example of <code>.mida</code> file:</p>
    <pre>#
# MIDA Configuration File
#

prompt = &quot;M> &quot;
prvlen = 20
block  = 8192 # default is 4096
prvcmd = &quot;timidity -Os&quot;</pre>
    <p>[<a href="#0">contents</a>]</p>
    <h3 id="6">6 Final Notes</h3>
    <p>It's allowed to put comments in MIDA source files or in interactive
      environment. MIDA uses C-like comments. Line comments starts
      with <code>//</code>, block comment starts with <code>/*</code> and
      ends with <code>*/</code>.</p>
    <p>Interpreter supports multiline input. It automatically detects
      unbalanced parenthesis, braces, brackets. If you want to continue
      writing a principle on the next line, end current line with a
      comma <code>,</code>. Since comma is allowed only between elements of
      a principle MIDA will know that current principle is not
      completed.</p>
    <p>I sincerely hope that MIDA will be useful to you. Good luck!</p>
    <p>[<a href="#0">contents</a>]</p>
  </body>
</html>
